openapi: 3.0.3
info:
  title: Policy Service
  description: The policy service exposes HTTP API for executing policies.
  version: "1.0"
servers:
- url: http://localhost:8081
  description: Policy Server
paths:
  /liveness:
    get:
      tags:
      - health
      summary: Liveness health
      operationId: health#Liveness
      responses:
        "200":
          description: OK response.
  /policy/{group}/{policyName}/{version}/evaluation:
    post:
      tags:
      - policy
      summary: Evaluate policy
      description: Evaluate executes a policy with the given 'data' as input.
      operationId: policy#Evaluate
      parameters:
      - name: group
        in: path
        description: Policy group.
        required: true
        schema:
          type: string
          description: Policy group.
          example: example
        example: example
      - name: policyName
        in: path
        description: Policy name.
        required: true
        schema:
          type: string
          description: Policy name.
          example: example
        example: example
      - name: version
        in: path
        description: Policy version.
        required: true
        schema:
          type: string
          description: Policy version.
          example: "1.0"
        example: "1.0"
      - name: x-evaluation-id
        in: header
        description: EvaluationID allows overwriting the randomly generated evaluationID
        allowEmptyValue: true
        schema:
          type: string
          description: EvaluationID allows overwriting the randomly generated evaluationID
          example: did:web:example.com
        example: did:web:example.com
      requestBody:
        description: Input data passed to the policy execution runtime.
        required: true
        content:
          application/json:
            schema:
              type: string
              description: Input data passed to the policy execution runtime.
              example: Omnis quasi aut consequuntur.
              format: binary
            example: Quis quos qui earum velit illum.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: string
                example: Tempore minus.
                format: binary
              example: Aliquam atque voluptatum ut dolorem.
  /policy/{group}/{policyName}/{version}/lock:
    delete:
      tags:
      - policy
      summary: Unlock policy
      description: Unlock a policy so it can be evaluated again.
      operationId: policy#Unlock
      parameters:
      - name: group
        in: path
        description: Policy group.
        required: true
        schema:
          type: string
          description: Policy group.
          example: Sint nam voluptatem ea consequatur similique et.
        example: Non mollitia nesciunt impedit facere.
      - name: policyName
        in: path
        description: Policy name.
        required: true
        schema:
          type: string
          description: Policy name.
          example: Ut commodi perspiciatis corporis.
        example: Accusamus autem sequi.
      - name: version
        in: path
        description: Policy version.
        required: true
        schema:
          type: string
          description: Policy version.
          example: Et nulla.
        example: In quis nesciunt autem et.
      responses:
        "200":
          description: OK response.
    post:
      tags:
      - policy
      summary: Lock policy
      description: Lock a policy so that it cannot be evaluated.
      operationId: policy#Lock
      parameters:
      - name: group
        in: path
        description: Policy group.
        required: true
        schema:
          type: string
          description: Policy group.
          example: Aut facere veniam repudiandae id.
        example: Aut minus alias.
      - name: policyName
        in: path
        description: Policy name.
        required: true
        schema:
          type: string
          description: Policy name.
          example: At eos facilis molestias in voluptas rem.
        example: Ab accusantium ut ut aliquid sint animi.
      - name: version
        in: path
        description: Policy version.
        required: true
        schema:
          type: string
          description: Policy version.
          example: Dolorem cumque laborum quis nesciunt.
        example: Aut voluptas.
      responses:
        "200":
          description: OK response.
  /readiness:
    get:
      tags:
      - health
      summary: Readiness health
      operationId: health#Readiness
      responses:
        "200":
          description: OK response.
components: {}
tags:
- name: health
  description: Health service provides health check endpoints.
- name: policy
  description: Policy Service provides evaluation of policies through Open Policy
    Agent.
